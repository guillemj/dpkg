# dpkg manual page - deb(5)
#
# Copyright © 1995 Raul Miller
# Copyright © 1996 Ian Jackson <ijackson@chiark.greenend.org.uk>
# Copyright © 2000 Wichert Akkerman <wakkerma@debian.org>
# Copyright © 2006-2017 Guillem Jover <guillem@debian.org>
#
# This is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

=encoding utf8

=head1 NAME

deb - Debian binary package format

=head1 SYNOPSIS

I<filename>B<.deb>

=head1 DESCRIPTION

The
B<.deb>
format is the Debian binary package file format.
It is understood
since dpkg 0.93.76, and is generated by default since dpkg 1.2.0 and
1.1.1elf (i386/ELF builds).

The format described here is used since Debian 0.93; details of the
old format are described in
L<deb-old(5)>.

=head1 FORMAT

The file is an
B<ar>
archive with a magic value of
B<!E<lt>archE<gt>>.
Only the common B<ar> archive format is supported, with no long file
name extensions, but with file names containing an optional trailing
slash, which limits their length to 15 characters (from the 16 allowed).
File sizes are limited to 10 ASCII decimal digits, allowing for up to
approximately 9536.74 MiB member files.

The B<tar> archives currently allowed are:

=over

=item * old-style (v7) format

=item * pre-POSIX ustar format

=item * subset of the GNU format

New style long pathnames and long linknames, supported since dpkg 1.4.1.17;
large file metadata since dpkg 1.18.24.

=item * POSIX ustar format

Long names supported since dpkg 1.15.0.

=back

Unrecognized tar typeflags are considered an error.
By default each tar entry size inside a tar archive is limited to
11 ASCII octal digits, allowing for up to 8 GiB tar entries.
The GNU large file metadata support permits 95-bit tar entry sizes and
negative timestamps, and 63-bit UID, GID and device numbers,
which amounts to practically unlimited values.

The B<ar> archive is composed of multiple members in a specific order:

=over

=item B<debian-binary>

The first required member contains a series of lines, separated by newlines.
Currently only one line is present, the format version number,
B<2.0> at the time this manual page was written.
Programs which read new-format archives should be prepared for the
minor number to be increased and new lines to be present, and should
ignore these if this is the case.

If the major number has changed, an incompatible change has been made
and the program should stop.
If it has not, then the program should
be able to safely continue, unless it encounters an unexpected member
in the archive (except at the end), as described below.

=item B<control.tar>

The second required member is a tar archive containing the package
metadata.

It can use the following compression:

=over

=item * none (supported since dpkg 1.17.6)

=item * gzip (with B<.gz> extension)

=item * xz (with B<.xz> extension, supported since dpkg 1.17.6)

=item * zstd (with B<.zst> extension, supported since dpkg 1.21.18)

=back

It contains a series of plain files:

=over

=item B<control>

Mandatory control information, in L<deb822(5)> format.

=item B<md5sums>

=item B<conffiles>

=item B<triggers>

=item B<shlibs>

=item B<symbols>

Optional package metadata.

=item B<preinst>

=item B<postinst>

=item B<prerm>

=item B<postrm>

Optional maintainer scripts.

=back

The control tarball may optionally contain an entry for ‘B<.>’,
the current directory.

=item B<data.tar>

The third, last required member contains the filesystem as a tar archive.

It can use the following compression:

=over

=item * none (supported since dpkg 1.10.24)

=item * gzip (with B<.gz> extension)

=item * xz (with B<.xz> extension, supported since dpkg 1.15.6)

=item * zstd (with B<.zst> extension, supported since dpkg 1.21.18)

=item * bzip2 (with B<.bz2> extension, supported since dpkg 1.10.24)

=item * lzma (with B<.lzma> extension, supported since dpkg 1.13.25)

=back

=back

These members must occur in this exact order.
Current implementations
should ignore any additional members after
B<data.tar>.
Further members may be defined in the future, and (if possible) will be
placed after these three.
Any additional members that may need to be
inserted after
B<debian-binary>
and before
B<control.tar>
or
B<data.tar>
and which should be safely ignored by older programs, will have names
starting with an underscore,
‘B<_>’.

Those new members which won't be able to be safely ignored will be
inserted before
B<data.tar>
with names starting with something other than underscores, or will
(more likely) cause the major version number to be increased.

=head1 MEDIA TYPE

=head2 Current

application/vnd.debian.binary-package

=head2 Deprecated

application/x-debian-package

application/x-deb

=head1 SEE ALSO

L<deb-old(5)>,
L<dpkg-deb(1)>,
L<deb-control(5)>,
L<deb-conffiles(5)>,
L<deb-md5sums(5)>,
L<deb-triggers(5)>,
L<deb-shlibs(5)>,
L<deb-symbols(5)>,
L<deb-preinst(5)>,
L<deb-postinst(5)>,
L<deb-prerm(5)>,
L<deb-postrm(5)>.
